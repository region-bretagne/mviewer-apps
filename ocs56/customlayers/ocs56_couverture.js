{
mviewer.customLayers.ocs56_couverture = {};
mviewer.customLayers.ocs56_couverture.classification_couverture = {};
mviewer.customLayers.ocs56_couverture.classification_couverture.a = {
        "CS1%":{"id":1,"title":"Sans végétation","field":"couverture","value":"CS1%","fill":"#fd6270","stroke":"#fd6270",  "strokewidth":0,"maxscaledenominator":"noscale"},
        "CS2%":{"id":2,"title":"Avec végétation","field":"couverture","value":"CS2%","fill":"#96de41","stroke":"#96de41",  "strokewidth":0,"maxscaledenominator":"noscale"}
  };
mviewer.customLayers.ocs56_couverture.classification_couverture.b = {
        "CS1?1%":{"id":3,"title":"Surfaces anthropisées","field":"couverture","value":"CS1?1%","fill":"#fd6270","stroke":"#fd6270",  "strokewidth":0,"maxscaledenominator":"100000"},
        "CS1?2%":{"id":4,"title":"Surfaces naturelles","field":"couverture","value":"CS1?2%","fill":"#cccccc","stroke":"#cccccc",  "strokewidth":0,"maxscaledenominator":"100000"},
        "CS2?1%":{"id":5,"title":"Végétation ligneuse","field":"couverture","value":"CS2?1%","fill":"#96de41","stroke":"#96de41",  "strokewidth":0,"maxscaledenominator":"100000"},
        "CS2?2%":{"id":6,"title":"Végétation non ligneuse","field":"couverture","value":"CS2?2%","fill":"#ccf24d","stroke":"#ccf24d",  "strokewidth":0,"maxscaledenominator":"100000"}
  };
mviewer.customLayers.ocs56_couverture.classification_couverture.c = {
        "CS1?1?1%":{"id":7,"title":"Zones imperméables","field":"couverture","value":"CS1?1?1%","fill":"#fd6270","stroke":"#fd6270",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS1?1?2%":{"id":8,"title":"Zones perméables","field":"couverture","value":"CS1?1?2%","fill":"#ffff99","stroke":"#ffff99",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS1?2?1%":{"id":9,"title":"Sols nus","field":"couverture","value":"CS1?2?1%","fill":"#cccccc","stroke":"#cccccc",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS1?2?2%":{"id":10,"title":"Surfaces d'eau","field":"couverture","value":"CS1?2?2%","fill":"#00ccf2","stroke":"#00ccf2",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS2?1?1%":{"id":11,"title":"Formations arborées","field":"couverture","value":"CS2?1?1%","fill":"#96de41","stroke":"#96de41",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS2?1?2%":{"id":12,"title":"Formations arbustives et sous-arbrisseaux","field":"couverture","value":"CS2?1?2%","fill":"#ad6659","stroke":"#ad6659",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS2?1?3%":{"id":13,"title":"Autres formations ligneuses","field":"couverture","value":"CS2?1?3%","fill":"#e68000","stroke":"#e68000",  "strokewidth":0,"maxscaledenominator":"50000"},
        "CS2?2?1%":{"id":14,"title":"Formations herbacées","field":"couverture","value":"CS2?2?1%","fill":"#a6ff8a","stroke":"#a6ff8a",  "strokewidth":0,"maxscaledenominator":"50000"}
    };
mviewer.customLayers.ocs56_couverture.classification_couverture.d = {
      "CS1.1.1.1":{"id":15,"title":"Zones bâties","field":"couverture","value":"CS1.1.1.1","fill":"#fd6270","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.1.1.2":{"id":16,"title":"Zones non bâties","field":"couverture","value":"CS1.1.1.2","fill":"#f4afa7","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.1.2.1":{"id":17,"title":"Zones à matériaux minéraux- pierre-terre","field":"couverture","value":"CS1.1.2.1","fill":"#dad6bf","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.1.2.2":{"id":18,"title":"Zones à autres matériaux composites","field":"couverture","value":"CS1.1.2.2","fill":"#b6b3ff","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.1.0":{"id":19,"title":"Autres sols nus","field":"couverture","value":"CS1.2.1.0","fill":"#dad6d2","stroke":"#000000#000000#6e6e6e#000000","maxscaledenominator":"10000"},
      "CS1.2.1.1":{"id":20,"title":"Sable et limons","field":"couverture","value":"CS1.2.1.1","fill":"#f4e8ba","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.1.2":{"id":21,"title":"Pierres","field":"couverture","value":"CS1.2.1.2","fill":"#b0968a","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.1.3":{"id":22,"title":"Rochers","field":"couverture","value":"CS1.2.1.3","fill":"#96966e","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.2.1":{"id":23,"title":"Eaux continentales","field":"couverture","value":"CS1.2.2.1","fill":"#7dc5ff","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.2.2":{"id":24,"title":"Eaux maritimes","field":"couverture","value":"CS1.2.2.2","fill":"#009cd6","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.3.1":{"id":25,"title":"Névés","field":"couverture","value":"CS1.2.3.1","fill":"#beffe8","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS1.2.3.2":{"id":26,"title":"Glaciers","field":"couverture","value":"CS1.2.3.2","fill":"#dbf2f7","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.1.1":{"id":27,"title":"Peuplements de feuillus","field":"couverture","value":"CS2.1.1.1","fill":"#96de41","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.1.2":{"id":28,"title":"Peuplements de conifères","field":"couverture","value":"CS2.1.1.2","fill":"#5c7326","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.1.3":{"id":29,"title":"Peuplements mixtes","field":"couverture","value":"CS2.1.1.3","fill":"#7dbd4a","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.2.1":{"id":30,"title":"Landes","field":"couverture","value":"CS2.1.2.1","fill":"#a8a828","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.2.2":{"id":31,"title":"Végétation sclérophylle","field":"couverture","value":"CS2.1.2.2","fill":"#adba8a","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.2.3":{"id":32,"title":"Formations arbustives basses linéaires ou organisées","field":"couverture","value":"CS2.1.2.3","fill":"#ad6659","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.1.2.5":{"id":33,"title":"Fourrés","field":"couverture","value":"CS2.1.2.5","fill":"#adad59","stroke":"#000000#6e6e6e#000000","maxscaledenominator":"10000"},
      "CS2.1.3.1":{"id":34,"title":"Autres formations arbustives","field":"couverture","value":"CS2.1.3.1","fill":"#aa66cd","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.2.1.1":{"id":35,"title":"Prairies","field":"couverture","value":"CS2.2.1.1","fill":"#a6ff8a","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.2.1.2":{"id":36,"title":"Pelouses","field":"couverture","value":"CS2.2.1.2","fill":"#d7ffb5","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.2.1.3":{"id":37,"title":"Jardins","field":"couverture","value":"CS2.2.1.3","fill":"#4fff67","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.2.1.4":{"id":38,"title":"Terres arables","field":"couverture","value":"CS2.2.1.4","fill":"#fff07a","stroke":"#000000", "strokewidth":1,"maxscaledenominator":"10000"},
      "CS2.2.1.5":{"id":39,"title":"Autres formations herbacées","field":"couverture","value":"CS2.2.1.5","fill":"#fff07a","stroke":"#000000#6e6e6e#000000","maxscaledenominator":"10000"}
  };


mviewer.customLayers.ocs56_couverture.style1 = function (feature, resolution) {
    var level = "";
    var ref = "";
    var val = feature.get("couverture");
    if (resolution > 76) {
            level = "a";
            ref = val.substring(0,3)+"%";
    } else if (resolution > 38) {
            level = "b";
            ref = val.substr(0,3)+"?"+val.substr(4,1)+"%"
    } else if (resolution > 9) {
            level = "c";
            ref = val.substr(0,3)+"?"+val.substr(4,1)+"?"+val.substr(6,1)+"%"
    } else {
			level = "d";
            ref = val;
	}

    feature.getProperties()["label"] = mviewer.customLayers.ocs56_couverture.classification_couverture[level][ref].title;
    var style = new ol.style.Style({
    fill: new ol.style.Fill({
      color: mviewer.customLayers.ocs56_couverture.classification_couverture[level][ref].fill
    }),
    stroke: new ol.style.Stroke({
      color: mviewer.customLayers.ocs56_couverture.classification_couverture[level][ref].fill,
      width: 0
    })
  });
    return style;
};

mviewer.customLayers.ocs56_couverture.layer = new ol.layer.VectorTile({
      style:  mviewer.customLayers.ocs56_couverture.style1,
      // minResolution: 2,
      maxResolution: 306,
      source: new ol.source.VectorTile({
        tilePixelRatio: 1, // oversampling when > 1
        tileGrid: ol.tilegrid.createXYZ({maxZoom: 20}),
        format: new ol.format.MVT(),
        url: 'https://ows.region-bretagne.fr/geoserver/gwc/service/tms/1.0.0/rb:ocs56_origine@EPSG%3A3857@pbf/{z}/{x}/{-y}.pbf'
      })
});
mviewer.customLayers.ocs56_couverture.handle = false;
}
